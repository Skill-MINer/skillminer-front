<!-- ========== HEADER ========== -->
<header class="sticky top-3 inset-x-0 flex flex-wrap md:justify-start md:flex-nowrap z-50 w-full text-sm">
  <nav
    class="bg-opacity-35 backdrop-blur shadow-sm relative max-w-[90rem] w-full bg-background border-gray-200 rounded-[36px] mx-2 py-3 px-4 md:flex md:items-center md:justify-between md:py-0 md:px-6 lg:px-8 xl:mx-auto dark:bg-background-darkMode dark:border-gray-700 dark:bg-opacity-35 dark:backdrop-blur dark:shadow-sm" 
    aria-label="Global">
    <div class="flex items-center justify-between">
      <a class="flex-none text-xl font-medium dark:text-white" routerLink="/" aria-label="SkillMINer">SkillMINer</a>
      <div class="md:hidden">
        <button type="button"
          class="hs-collapse-toggle size-8 flex justify-center items-center text-sm font-semibold rounded-full border border-gray-200 text-textcolor hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:border-gray-700 dark:hover:bg-gray-700 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"
          data-hs-collapse="#navbar-collapse-with-animation" aria-controls="navbar-collapse-with-animation"
          aria-label="Toggle navigation">
          <svg class="hs-collapse-open:hidden flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24"
            height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <line x1="3" x2="21" y1="6" y2="6" />
            <line x1="3" x2="21" y1="12" y2="12" />
            <line x1="3" x2="21" y1="18" y2="18" />
          </svg>
          <svg class="hs-collapse-open:block hidden flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24"
            height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <path d="M18 6 6 18" />
            <path d="m6 6 12 12" />
          </svg>
        </button>
      </div>
    </div>
    <div id="navbar-collapse-with-animation"
      class="hs-collapse hidden overflow-hidden transition-all duration-300 basis-full grow md:block">
      <div
        class="flex flex-col gap-y-4 gap-x-0 mt-5 md:flex-row md:items-center md:justify-end md:gap-y-0 md:gap-x-7 md:mt-0 md:ps-7">

        <div class="ml-4">
          @if (themeService.isDarkMode) {
          <button id="header__moon" (click)="toLightMode()" title="Switch to light mode"
            class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="24" height="24"
              viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
              stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
              <circle cx="12" cy="12" r="4"></circle>
              <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7">
              </path>
            </svg>
          </button>
          } @else {
          <button id="header__indeterminate" (click)="toDarkMode()" title="Switch to dark mode"
            class="relative w-10 h-10 focus:outline-none focus:shadow-outline text-gray-500">
            <svg style="width:24px;height:24px" viewBox="0 0 24 24">
              <path fill="currentColor"
                d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z" />
            </svg>
          </button>
          }
        </div>

        <a 
        [ngClass]="{
          'text-accent md:py-6 dark:text-accent hover:text-accent-6': router.url === '/',
          'text-textcolor hover:text-primary md:py-6 dark:text-gray-400 dark:hover:text-textcolor': router.url !== '/'
        }"
        class="font-medium"
         routerLink="/"
          aria-current="page">Landing</a>
        <a 
        [ngClass]="{
          'text-accent md:py-6 dark:text-accent hover:text-accent-6': router.url === '/search',
          'text-textcolor hover:text-primary md:py-6 dark:text-gray-400 dark:hover:text-textcolor': router.url !== '/search'
        }"
        class="font-medium"
        routerLink="/search">Formations</a>
        <a 
        [ngClass]="{
          'text-accent md:py-6 dark:text-accent hover:text-accent-6': router.url === '/create-formation',
          'text-textcolor hover:text-primary md:py-6 dark:text-gray-400 dark:hover:text-textcolor': router.url !== '/create-formation'
        }"
        class="font-medium"
          routerLink="/create-formation">Create üìù</a>

        @if (!isLoggedIn()) {
        <a class="flex items-center gap-x-2 font-medium text-textcolor hover:text-primary md:border-s md:border-gray-300 md:my-6 md:ps-6 dark:border-gray-700 dark:text-gray-400 dark:hover:text-primary"
          routerLink="/login">
          <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
            <circle cx="12" cy="7" r="4" />
          </svg>
          Log in
        </a>
        } @else {
        <div
          class="m-1 hs-dropdown relative inline-flex [--trigger:click] [--placement:bottom]">
          <button type="button" id="hs-dropdown-hover-event"
            class="flex items-center w-full text-textcolor hover:text-primary font-medium dark:text-gray-400 dark:hover:text-textcolor">
            <img class="flex-shrink-0 object-cover mx-1 rounded-full w-9 h-9"
            [src]="userService.currentUser.imageUrl" alt="Profile image">
            Account
            <svg class="ms-2 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="m6 9 6 6 6-6" />
            </svg>
          </button>

          <div
            class="hs-dropdown-menu transition-[opacity,margin] duration hs-dropdown-open:opacity-100 hidden min-w-60 bg-background-1 shadow-md rounded-lg p-2 mt-2 dark:bg-gray-800 dark:border dark:border-gray-700 dark:divide-gray-700 after:h-4 after:absolute after:-bottom-4 after:start-0 after:w-full before:h-4 before:absolute before:-top-4 before:start-0 before:w-full mr-4"
            aria-labelledby="hs-dropdown-hover-event">

            <a routerLink="/profile"
              class="flex items-center p-3 -mt-2 text-sm text-gray-600 transition-colors duration-200 transform dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white">
              <img class="flex-shrink-0 object-cover mx-1 rounded-full w-9 h-9"
                [src]="userService.currentUser.imageUrl" alt="Profile picture">
              <div class="mx-1">
                <h1 class="text-sm font-semibold text-gray-700 dark:text-gray-200">{{ userService.currentUser.nom }} {{ userService.currentUser.prenom }}</h1>
                <p class="text-sm text-gray-500 dark:text-gray-400">{{ userService.currentUser.email }}</p>
              </div>
            </a>

            <hr class="border-gray-200 dark:border-gray-700 ">

            <a class="flex items-center gap-x-3.5 py-2 px-3 rounded-lg text-sm text-textcolor hover:bg-gray-100 focus:ring-2 focus:ring-hover:text-primary dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-primary dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"
              routerLink="/profile">
              Profile
            </a>

            <a class="flex items-center gap-x-3.5 py-2 px-3 rounded-lg text-sm text-textcolor hover:bg-gray-100 focus:ring-2 focus:ring-hover:text-primary dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-primary dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"
              routerLink="/profile-update">
              Settings
            </a>

            <hr class="border-gray-200 dark:border-gray-700 ">

            <a class="flex items-center gap-x-3.5 py-2 px-3 rounded-lg text-sm text-textcolor hover:bg-gray-100 focus:ring-2 focus:ring-hover:text-primary dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-primary dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"
              (click)="logout()" routerLink="/">
              <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                <circle cx="12" cy="7" r="4" />
              </svg>
              Sign Out
            </a>

          </div>
        </div>
        }
      </div>
    </div>
  </nav>
</header>
<!-- ========== END HEADER ========== -->